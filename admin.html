<!DOCTYPE html>
<html>
<head>
    <title>Rummy Rex - Admin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { background: #f4f4f4; font-family: sans-serif; padding: 20px; }
        .card { background: white; padding: 15px; margin-bottom: 10px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        h2 { color: #052c1a; }
        input { padding: 8px; border: 1px solid #ccc; border-radius: 4px; width: 100px; }
        button { background: #0a4d2d; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>
    <h2>Rummy Rex Admin Panel</h2>
    <hr>
    <div id="userContainer">Loading Users...</div>

    <script>
        async function fetchUsers() {
            const res = await fetch('/api/admin/users');
            const users = await res.json();
            let html = '';
            users.forEach(user => {
                html += `
                    <div class="card">
                        <p><strong>Name:</strong> ${user.name} | <strong>Phone:</strong> ${user.phone}</p>
                        <p><strong>Current Coins:</strong> ${user.coins}</p>
                        <input type="number" id="coins-${user._id}" placeholder="Add Coins">
                        <button onclick="updateCoins('${user._id}')">Add Coins</button>
                    </div>
                `;
            });
            document.getElementById('userContainer').innerHTML = html;
        }

        async function updateCoins(userId) {
            const amount = document.getElementById('coins-'+userId).value;
            if(!amount) return alert("Amount enter chey mama!");
            
            const res = await fetch('/api/admin/update-coins', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ userId, amount })
            });
            const data = await res.json();
            if(data.success) {
                alert("Coins added successfully!");
                fetchUsers();
            }
        }
        fetchUsers();
    </script>
</body>
</html>
